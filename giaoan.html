<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Cáº­p nháº­t giÃ¡o Ã¡n</title>
<link rel="stylesheet" href="css/giaoan.css">
</head>
<body>

<h1>Cáº¬P NHáº¬T GIÃO ÃN</h1>

<div class="formRow">
  <label>ID giÃ¡o viÃªn:</label>
  <input type="text" id="gvIDInput" placeholder="Nháº­p ID giÃ¡o viÃªn">
  <span id="gvNameDisplay"></span>
</div>

<div class="formRow">
  <label>MÃ´n há»c:</label>
  <select id="subjectSelect"></select>
</div>

<div class="formRow">
  <label>TÃªn bÃ i giáº£ng:</label>
  <input type="text" id="lessonName">
</div>

<div class="formRow">
  <label>Sá»‘ tiáº¿t:</label>
  <input type="text" id="lessonHours">
</div>

<div class="formRow">
  <label>NgÃ y báº¯t Ä‘áº§u:</label>
  <input type="date" id="lessonDate">
</div>

<div class="formRow editorRow">
  <label>Ná»™i dung bÃ i giáº£ng</label>
</div>
  <div class="editorToolbar">
  <!-- NÃºt upload tá»« PC -->
  <button type="button" id="btnChooseFile">ğŸ“ Choose File</button>
  <input type="file" id="fileInput" accept="image/*" hidden>

  <button type="button" onclick="addAudio()">ğŸ”Š Audio</button>
  <button type="button" id="btnMp4">ğŸ¬ MP4 (GG)</button>
  <button type="button" onclick="addYT()">ğŸ¬ YouTube</button>
  <button type="button" onclick="openPreview()">ğŸ‘ Preview</button>
</div>



  <div
 id="lessonContent"
  contenteditable="true"
  style="border:1px solid #333; min-height:200px; padding:8px; overflow:auto;"
  placeholder="Nháº­p ná»™i dung bÃ i giáº£ng táº¡i Ä‘Ã¢y..."
></div>


  <!-- PREVIEW -->
  <div id="lessonPreview" style="display:none; margin-top:10px;
       padding:10px; border:1px solid #ccc; background:#fafafa">
  </div>





<div class="formActions">
  <button id="addLesson" type="button">ThÃªm</button>
  <button id="saveLesson" type="button">LÆ°u</button>

 
  <button id="goBaitap">BÃ i Táº­p</button>
</div>

<h2>Danh sÃ¡ch giÃ¡o Ã¡n theo mÃ´n há»c</h2>
<div id="lessonList"></div>
<script>
function insertAtCursor(text) {
  const ta = document.getElementById("lessonContent");
  const start = ta.selectionStart;
  const end = ta.selectionEnd;

  ta.value =
    ta.value.substring(0, start) +
    text +
    ta.value.substring(end);

  ta.selectionStart = ta.selectionEnd = start + text.length;
  ta.focus();
}

function addImage() {
  const url = prompt("DÃ¡n link áº£nh:");
  if (!url) return;
  insertAtCursor(`<img src="${url}" style="max-width:100%;"><br>`);
}

function addAudio() {
  const url = prompt("DÃ¡n link MP3 hoáº·c YouTube:");
  if (!url) return;

  if (url.includes("youtube")) {
    let id = url.includes("watch?v=")
      ? url.split("watch?v=")[1].split("&")[0]
      : url.split("youtu.be/")[1];

    insertAtCursor(
      `<iframe height="80"
        src="https://www.youtube.com/embed/${id}">
      </iframe><br>`
    );
  } else {
    insertAtCursor(`<audio controls src="${url}"></audio><br>`);
  }
}

function addYT() {
  const url = prompt("DÃ¡n link YouTube:");
  if (!url) return;

  let id = url.includes("watch?v=")
    ? url.split("watch?v=")[1].split("&")[0]
    : url.split("youtu.be/")[1];

  insertAtCursor(
    `<iframe width="100%" height="315"
      src="https://www.youtube.com/embed/${id}"
      allowfullscreen>
    </iframe><br>`
  );
}
</script>

<script>
  // NÃºt "BÃ i Táº­p" dáº«n vá» trang baitap.html
  document.getElementById("goBaitap").addEventListener("click", () => {
    window.location.href = "baitap.html";
  });
</script>

<script type="module" src="js/giaoan.js"></script>
</body>
</html>
